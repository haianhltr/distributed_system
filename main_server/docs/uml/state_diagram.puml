@startuml Job State Diagram

[*] --> Pending : Job created

state Pending {
    [*] --> WaitingForBot
    WaitingForBot --> Claimed : Bot claims job
    WaitingForBot --> Failed : System error
}

state Claimed {
    [*] --> BotAssigned
    BotAssigned --> Processing : Bot starts job
    BotAssigned --> Pending : Bot fails/restarts
    BotAssigned --> Failed : Claim timeout
}

state Processing {
    [*] --> Executing
    Executing --> Succeeded : Job completed
    Executing --> Failed : Job failed
    Executing --> Pending : Bot crashes/timeout
}

state Succeeded {
    [*] --> ResultsStored
    ResultsStored --> [*] : Job lifecycle complete
}

state Failed {
    [*] --> ErrorLogged
    ErrorLogged --> Pending : Retry (if attempts < max)
    ErrorLogged --> [*] : Max attempts reached
}

note right of Pending
  Job is available for
  bot assignment
end note

note right of Claimed
  Bot has claimed job
  but not started processing
end note

note right of Processing
  Bot is actively
  executing operation
end note

note right of Succeeded
  Job completed successfully
  Results stored in database
  and data lake
end note

note right of Failed
  Job failed due to error
  or bot failure
end note

@enduml
